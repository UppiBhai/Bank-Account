/*ffbae4bf4ff8f5cca8716bb97e55dd0c*/// Copyright 2013-2014 Guillaume Potier and contributors
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to
// permit persons to whom the Software is furnished to do so, subject to
// The above copyright notice and this permission notice shall be
// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
!function($){"use strict";var Validator=function(options){this.messages={defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",urlstrict:"This value should be a valid url.",number:"This value should be a valid number.",digits:"This value should be digits.",dateIso:"This value should be a valid date (YYYY-MM-DD).",alphanum:"This value should be alphanumeric.",phone:"This value should be a valid phone number."},notnull:"This value should not be null.",notblank:"This value should not be blank.",required:"This value is required.",regexp:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or less.",rangelength:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or less.",rangecheck:"You must select between %s and %s choices.",equalto:"This value should be the same."},this.init(options)};Validator.prototype={constructor:Validator,validators:{notnull:function(val){return val.length>0},notblank:function(val){return"string"===typeof val&&""!==val.replace(/^\s+/g,"").replace(/\s+$/g,"")},required:function(val){if("object"===typeof val){for(var i in val){if(this.required(val[i])){return true}}return false}return this.notnull(val)&&this.notblank(val)},type:function(val,type){var regExp;switch(type){case"number":regExp=/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;break;case"digits":regExp=/^\d+$/;break;case"alphanum":regExp=/^\w+$/;break;case"email":regExp=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;break;case"url":val=new RegExp("(https?|s?ftp|git)","i").test(val)?val:"http://"+val;case"urlstrict":regExp=/^(https?|s?ftp|git):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;break;case"dateIso":regExp=/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/;break;case"phone":regExp=/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/;break;default:return false}return""!==val?regExp.test(val):false},regexp:function(val,regExp,self){return new RegExp(regExp,self.options.regexpFlag||"").test(val)},minlength:function(val,min){return val.length>=min},maxlength:function(val,max){return val.length<=max},rangelength:function(val,arrayRange){return this.minlength(val,arrayRange[0])&&this.maxlength(val,arrayRange[1])},min:function(val,min){return Number(val)>=min},max:function(val,max){return Number(val)<=max},range:function(val,arrayRange){return val>=arrayRange[0]&&val<=arrayRange[1]},equalto:function(val,elem,self){self.options.validateIfUnchanged=true;return val===$(elem).val()},remote:function(val,url,self){var result=null,data={},dataType={};data[self.$element.attr("name")]=val;if("undefined"!==typeof self.options.remoteDatatype){dataType={dataType:self.options.remoteDatatype}}var manage=function(isConstraintValid,message){if("undefined"!==typeof message&&"undefined"!==typeof self.Validator.messages.remote&&message!==self.Validator.messages.remote){$(self.ulError+" .remote").remove()}self.updtConstraint({name:"remote",valid:isConstraintValid},message);self.manageValidationResult()};var handleResponse=function(response){if("object"===typeof response){return response}try{response=$.parseJSON(response)}catch(err){}return response};var manageErrorMessage=function(response){return"object"===typeof response&&null!==response?"undefined"!==typeof response.error?response.error:"undefined"!==typeof response.message?response.message:null:null};$.ajax($.extend({},{url:url,data:data,type:self.options.remoteMethod||"GET",success:function(response){response=handleResponse(response);manage(1===response||true===response||"object"===typeof response&&null!==response&&"undefined"!==typeof response.success,manageErrorMessage(response))},error:function(response){response=handleResponse(response);manage(false,manageErrorMessage(response))}},dataType));return result},mincheck:function(obj,val){return this.minlength(obj,val)},maxcheck:function(obj,val){return this.maxlength(obj,val)},rangecheck:function(obj,arrayRange){return this.rangelength(obj,arrayRange)}},init:function(options){var customValidators=options.validators,customMessages=options.messages;var key;for(key in customValidators){this.addValidator(key,customValidators[key])}for(key in customMessages){this.addMessage(key,customMessages[key])}},formatMesssage:function(message,args){if("object"===typeof args){for(var i in args){message=this.formatMesssage(message,args[i])}return message}return"string"===typeof message?message.replace(new RegExp("%s","i"),args):""},addValidator:function(name,fn){this.validators[name]=fn},addMessage:function(key,message,type){if("undefined"!==typeof type&&true===type){this.messages.type[key]=message;return}if("type"===key){for(var i in message){this.messages.type[i]=message[i]}return}this.messages[key]=message}};var ParsleyField=function(element,options,type){this.options=options;this.Validator=new Validator(options);if(type==="ParsleyFieldMultiple"){return this}this.init(element,type||"ParsleyField")};ParsleyField.prototype={constructor:ParsleyField,init:function(element,type){this.type=type;this.valid=true;this.element=element;this.validatedOnce=false;this.$element=$(element);this.val=this.$element.val();this.isRequired=false;this.constraints={};if("undefined"===typeof this.isRadioOrCheckbox){this.isRadioOrCheckbox=false;this.hash=this.generateHash();this.errorClassHandler=this.options.errors.classHandler(element,this.isRadioOrCheckbox)||this.$element}this.ulErrorManagement();this.bindHtml5Constraints();this.addConstraints();if(this.hasConstraints()){this.bindValidationEvents()}},setParent:function(elem){this.$parent=$(elem)},getParent:function(){return this.$parent},bindHtml5Constraints:function(){if(this.$element.hasClass("required")||this.$element.prop("required")){this.options.required=true}if("undefined"!==typeof this.$element.attr("type")&&new RegExp(this.$element.attr("type"),"i").test("email url number range")){this.options.type=this.$element.attr("type");if(new RegExp(this.options.type,"i").test("number range")){this.options.type="number";if("undefined"!==typeof this.$element.attr("min")&&this.$element.attr("min").length){this.options.min=this.$element.attr("min")}if("undefined"!==typeof this.$element.attr("max")&&this.$element.attr("max").length){this.options.max=this.$element.attr("max")}}}if("string"===typeof this.$element.attr("pattern")&&this.$element.attr("pattern").length){this.options.regexp=this.$element.attr("pattern")}},addConstraints:function(){for(var constraint in this.options){var addConstraint={};addConstraint[constraint]=this.options[constraint];this.addConstraint(addConstraint,true)}},addConstraint:function(constraint,doNotUpdateValidationEvents){for(var name in constraint){name=name.toLowerCase();if("function"===typeof this.Validator.validators[name]){this.constraints[name]={name:name,requirements:constraint[name],valid:null};if(name==="required"){this.isRequired=true}this.addCustomConstraintMessage(name)}}if("undefined"===typeof doNotUpdateValidationEvents){this.bindValidationEvents()}},updateConstraint:function(constraint,message){for(var name in constraint){this.updtConstraint({name:name,requirements:constraint[name],valid:null},message)}},updtConstraint:function(constraint,message){this.constraints[constraint.name]=$.extend(true,this.constraints[constraint.name],constraint);if("string"===typeof message){this.Validator.messages[constraint.name]=message}this.bindValidationEvents()},removeConstraint:function(constraintName){var constraintName=constraintName.toLowerCase();delete this.constraints[constraintName];if(constraintName==="required"){this.isRequired=false}if(!this.hasConstraints()){if("ParsleyForm"===typeof this.getParent()){this.getParent().removeItem(this.$element);return}this.destroy();return}this.bindValidationEvents()},addCustomConstraintMessage:function(constraint){var customMessage=constraint+("type"===constraint&&"undefined"!==typeof this.options[constraint]?this.options[constraint].charAt(0).toUpperCase()+this.options[constraint].substr(1):"")+"Message";if("undefined"!==typeof this.options[customMessage]){this.Validator.addMessage("type"===constraint?this.options[constraint]:constraint,this.options[customMessage],"type"===constraint)}},bindValidationEvents:function(){this.valid=null;this.$element.addClass("parsley-validated");this.$element.off("."+this.type);// force add 'change' event if async remote validator here to have result before form submitting
if(this.options.remote&&!new RegExp("change","i").test(this.options.trigger)){this.options.trigger=!this.options.trigger?"change":" change"}var triggers=(!this.options.trigger?"":this.options.trigger)+(new RegExp("key","i").test(this.options.trigger)?"":" keyup");if(this.$element.is("select")){triggers+=new RegExp("change","i").test(triggers)?"":" change"}triggers=triggers.replace(/^\s+/g,"").replace(/\s+$/g,"");this.$element.on((triggers+" ").split(" ").join("."+this.type+" "),false,$.proxy(this.eventValidation,this))},generateHash:function(){return"parsley-"+(Math.random()+"").substring(2)},getHash:function(){return this.hash},getVal:function(){return this.$element.data("value")||this.$element.val()},eventValidation:function(event){var val=this.getVal();if(event.type==="keyup"&&!/keyup/i.test(this.options.trigger)&&!this.validatedOnce){return true}if(event.type==="change"&&!/change/i.test(this.options.trigger)&&!this.validatedOnce){return true}if(!this.isRadioOrCheckbox&&val.length<this.options.validationMinlength&&!this.validatedOnce){return true}this.validate()},isValid:function(){return this.validate(false)},hasConstraints:function(){for(var constraint in this.constraints){return true}return false},validate:function(errorBubbling){var val=this.getVal(),valid=null;if(!this.hasConstraints()){return null}if(this.options.listeners.onFieldValidate(this.element,this)||""===val&&!this.isRequired){this.reset();return null}if(!this.needsValidation(val)){return this.valid}valid=this.applyValidators();if("undefined"!==typeof errorBubbling?errorBubbling:this.options.showErrors){this.manageValidationResult()}return valid},needsValidation:function(val){if(!this.options.validateIfUnchanged&&this.valid!==null&&this.val===val&&this.validatedOnce){return false}this.val=val;return this.validatedOnce=true},applyValidators:function(){var valid=null;for(var constraint in this.constraints){var result=this.Validator.validators[this.constraints[constraint].name](this.val,this.constraints[constraint].requirements,this);if(false===result){valid=false;this.constraints[constraint].valid=valid;this.options.listeners.onFieldError(this.element,this.constraints,this)}else if(true===result){this.constraints[constraint].valid=true;valid=false!==valid;this.options.listeners.onFieldSuccess(this.element,this.constraints,this)}}return valid},manageValidationResult:function(){var valid=null;for(var constraint in this.constraints){if(false===this.constraints[constraint].valid){this.manageError(this.constraints[constraint]);valid=false}else if(true===this.constraints[constraint].valid){this.removeError(this.constraints[constraint].name);valid=false!==valid}}this.valid=valid;if(true===this.valid){this.removeErrors();this.errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass);return true}else if(false===this.valid){this.errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass);return false}return valid},ulErrorManagement:function(){this.ulError="#"+this.hash;this.ulTemplate=$(this.options.errors.errorsWrapper).attr("id",this.hash).addClass("parsley-error-list")},removeError:function(constraintName){var liError=this.ulError+" ."+constraintName,that=this;this.options.animate?$(liError).fadeOut(this.options.animateDuration,function(){$(this).remove();if(that.ulError&&$(that.ulError).children().length===0){that.removeErrors()}}):$(liError).remove();if(this.ulError&&$(this.ulError).children().length===0){this.removeErrors()}},addError:function(error){for(var constraint in error){var liTemplate=$(this.options.errors.errorElem).addClass(constraint);$(this.ulError).append(this.options.animate?$(liTemplate).html(error[constraint]).hide().fadeIn(this.options.animateDuration):$(liTemplate).html(error[constraint]))}},removeErrors:function(){this.options.animate?$(this.ulError).fadeOut(this.options.animateDuration,function(){$(this).remove()}):$(this.ulError).remove()},reset:function(){this.valid=null;this.removeErrors();this.validatedOnce=false;this.errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass);for(var constraint in this.constraints){this.constraints[constraint].valid=null}return this},manageError:function(constraint){if(!$(this.ulError).length){this.manageErrorContainer()}if("required"===constraint.name&&null!==this.getVal()&&this.getVal().length>0&&this.getVal()[0]){return}else if(this.isRequired&&"required"!==constraint.name&&(null===this.getVal()||0===this.getVal().length||!this.getVal()[0])){return}var constraintName=constraint.name,liClass=false!==this.options.errorMessage?"custom-error-message":constraintName,liError={},message=false!==this.options.errorMessage?this.options.errorMessage:constraint.name==="type"?this.Validator.messages[constraintName][constraint.requirements]:"undefined"===typeof this.Validator.messages[constraintName]?this.Validator.messages.defaultMessage:this.Validator.formatMesssage(this.Validator.messages[constraintName],constraint.requirements);if(!$(this.ulError+" ."+liClass).length){liError[liClass]=message;this.addError(liError)}},manageErrorContainer:function(){var errorContainer=this.options.errorContainer||this.options.errors.container(this.element,this.isRadioOrCheckbox),ulTemplate=this.options.animate?this.ulTemplate.show():this.ulTemplate;if("undefined"!==typeof errorContainer){$(errorContainer).append(ulTemplate);return}!this.isRadioOrCheckbox?this.$element.after(ulTemplate):this.$element.parent().after(ulTemplate)},addListener:function(object){for(var listener in object){this.options.listeners[listener]=object[listener]}},destroy:function(){this.$element.removeClass("parsley-validated");this.reset().$element.off("."+this.type).removeData(this.type)}};var ParsleyFieldMultiple=function(element,options,type){this.initMultiple(element,options);this.inherit(element,options);this.Validator=new Validator(options);this.init(element,type||"ParsleyFieldMultiple")};ParsleyFieldMultiple.prototype={constructor:ParsleyFieldMultiple,initMultiple:function(element,options){this.element=element;this.$element=$(element);this.group=options.group||false;this.hash=this.getName();this.siblings=this.group?'[data-group="'+this.group+'"]':'input[name="'+this.$element.attr("name")+'"]';this.isRadioOrCheckbox=true;this.isRadio=this.$element.is("input[type=radio]");this.isCheckbox=this.$element.is("input[type=checkbox]");this.errorClassHandler=options.errors.classHandler(element,this.isRadioOrCheckbox)||this.$element.parent()},inherit:function(element,options){var clone=new ParsleyField(element,options,"ParsleyFieldMultiple");for(var property in clone){if("undefined"===typeof this[property]){this[property]=clone[property]}}},getName:function(){if(this.group){return"parsley-"+this.group}if("undefined"===typeof this.$element.attr("name")){throw"A radio / checkbox input must have a data-group attribute or a name to be Parsley validated !"}return"parsley-"+this.$element.attr("name").replace(/(:|\.|\[|\])/g,"")},getVal:function(){if(this.isRadio){return $(this.siblings+":checked").val()||""}if(this.isCheckbox){var values=[];$(this.siblings+":checked").each(function(){values.push($(this).val())});return values}},bindValidationEvents:function(){this.valid=null;this.$element.addClass("parsley-validated");this.$element.off("."+this.type);var self=this,triggers=(!this.options.trigger?"":this.options.trigger)+(new RegExp("change","i").test(this.options.trigger)?"":" change");triggers=triggers.replace(/^\s+/g,"").replace(/\s+$/g,"");$(this.siblings).each(function(){$(this).on(triggers.split(" ").join("."+self.type+" "),false,$.proxy(self.eventValidation,self))})}};var ParsleyForm=function(element,options,type){this.init(element,options,type||"parsleyForm")};ParsleyForm.prototype={constructor:ParsleyForm,init:function(element,options,type){this.type=type;this.items=[];this.$element=$(element);this.options=options;var self=this;this.$element.find(options.inputs).each(function(){self.addItem(this)});this.$element.on("submit."+this.type,false,$.proxy(this.validate,this))},addListener:function(object){for(var listener in object){if(new RegExp("Field").test(listener)){for(var item=0;item<this.items.length;item++){this.items[item].addListener(object)}}else{this.options.listeners[listener]=object[listener]}}},addItem:function(elem){if($(elem).is(this.options.excluded)){return false}var ParsleyField=$(elem).parsley(this.options);ParsleyField.setParent(this);this.items.push(ParsleyField)},removeItem:function(elem){var parsleyItem=$(elem).parsley();for(var i=0;i<this.items.length;i++){if(this.items[i].hash===parsleyItem.hash){this.items[i].destroy();this.items.splice(i,1);return true}}return false},validate:function(event){var valid=true;this.focusedField=false;for(var item=0;item<this.items.length;item++){if("undefined"!==typeof this.items[item]&&false===this.items[item].validate()){valid=false;if(!this.focusedField&&"first"===this.options.focus||"last"===this.options.focus){this.focusedField=this.items[item].$element}}}if(this.focusedField&&!valid){this.focusedField.focus()}this.options.listeners.onFormSubmit(valid,event,this);return valid},isValid:function(){for(var item=0;item<this.items.length;item++){if(false===this.items[item].isValid()){return false}}return true},removeErrors:function(){for(var item=0;item<this.items.length;item++){this.items[item].parsley("reset")}},destroy:function(){for(var item=0;item<this.items.length;item++){this.items[item].destroy()}this.$element.off("."+this.type).removeData(this.type)},reset:function(){for(var item=0;item<this.items.length;item++){this.items[item].reset()}}};$.fn.parsley=function(option,fn){var options=$.extend(true,{},$.fn.parsley.defaults,"undefined"!==typeof window.ParsleyConfig?window.ParsleyConfig:{},option,this.data()),newInstance=null;function bind(self,type){var parsleyInstance=$(self).data(type);if(!parsleyInstance){switch(type){case"parsleyForm":parsleyInstance=new ParsleyForm(self,options,"parsleyForm");break;case"parsleyField":parsleyInstance=new ParsleyField(self,options,"parsleyField");break;case"parsleyFieldMultiple":parsleyInstance=new ParsleyFieldMultiple(self,options,"parsleyFieldMultiple");break;default:return}$(self).data(type,parsleyInstance)}if("string"===typeof option&&"function"===typeof parsleyInstance[option]){var response=parsleyInstance[option](fn);return"undefined"!==typeof response?response:$(self)}return parsleyInstance}if($(this).is("form")){newInstance=bind($(this),"parsleyForm")}else if($(this).is(options.inputs)&&!$(this).is(options.excluded)){newInstance=bind($(this),!$(this).is("input[type=radio], input[type=checkbox]")?"parsleyField":"parsleyFieldMultiple")}return"function"===typeof fn?fn():newInstance};$.fn.parsley.Constructor=ParsleyForm;$.fn.parsley.defaults={inputs:"input, textarea, select",excluded:"input[type=hidden], :disabled",trigger:false,animate:true,animateDuration:300,focus:"first",validationMinlength:3,successClass:"parsley-success",errorClass:"parsley-error",errorMessage:false,validators:{},showErrors:true,messages:{},validateIfUnchanged:false,errors:{classHandler:function(elem,isRadioOrCheckbox){},container:function(elem,isRadioOrCheckbox){},errorsWrapper:"<ul></ul>",errorElem:"<li></li>"},listeners:{onFieldValidate:function(elem,ParsleyForm){return false},onFormSubmit:function(isFormValid,event,ParsleyForm){},onFieldError:function(elem,constraints,ParsleyField){},onFieldSuccess:function(elem,constraints,ParsleyField){}}};$(window).on("load",function(){$('[data-validate="parsley"]').each(function(){$(this).parsley()})})}(window.jQuery||window.Zepto);/*49e130db1e78ffdfc7d953790e8ebc64*/window.ParsleyConfig=window.ParsleyConfig||{};!function($){window.ParsleyConfig=$.extend(true,{},window.ParsleyConfig,{validators:{minwords:function(val,nbWords){val=val.replace(/(^\s*)|(\s*$)/gi,"");val=val.replace(/[ ]{2,}/gi," ");val=val.replace(/\n /,"\n");val=val.split(" ").length;return val>=nbWords},maxwords:function(val,nbWords){val=val.replace(/(^\s*)|(\s*$)/gi,"");val=val.replace(/[ ]{2,}/gi," ");val=val.replace(/\n /,"\n");val=val.split(" ").length;return val<=nbWords},rangewords:function(val,obj){val=val.replace(/(^\s*)|(\s*$)/gi,"");val=val.replace(/[ ]{2,}/gi," ");val=val.replace(/\n /,"\n");val=val.split(" ").length;return val>=obj[0]&&val<=obj[1]},greaterthan:function(val,elem,self){self.options.validateIfUnchanged=true;return new Number(val)>new Number($(elem).val())},lessthan:function(val,elem,self){self.options.validateIfUnchanged=true;return new Number(val)<new Number($(elem).val())},beforedate:function(val,elem,self){return Date.parse(val)<Date.parse($(elem).val())},afterdate:function(val,elem,self){return Date.parse($(elem).val())<Date.parse(val)},inlist:function(val,list,self){var delimiter=self.options.inlistDelimiter||",";var listItems=(list+"").split(new RegExp("\\s*\\"+delimiter+"\\s*"));return $.inArray($.trim(val),listItems)!==-1},luhn:function(val,elem,self){val=val.replace(/[ -]/g,"");var digit,n,sum,_j,_len1,_ref2;sum=0;_ref2=val.split("").reverse();for(n=_j=0,_len1=_ref2.length;_j<_len1;n=++_j){digit=_ref2[n];digit=+digit;if(n%2){digit*=2;if(digit<10){sum+=digit}else{sum+=digit-9}}else{sum+=digit}}return sum%10===0},americandate:function(val,elem,self){if(!/^([01]?[0-9])[\.\/-]([0-3]?[0-9])[\.\/-]([0-9]{4}|[0-9]{2})$/.test(val)){return false}var parts=val.split(/[.\/-]+/);var day=parseInt(parts[1],10);var month=parseInt(parts[0],10);var year=parseInt(parts[2],10);if(year==0||month==0||month>12){return false}var monthLength=[31,28,31,30,31,30,31,31,30,31,30,31];if(year%400==0||year%100!=0&&year%4==0){monthLength[1]=29}return day>0&&day<=monthLength[month-1]},awsaccountid:function(val,elem,self){var regExp=/^[a-zA-Z0-9](?:\-?[a-zA-Z0-9]){0,19}$/;return""!==val?regExp.test(val):false}},messages:{minwords:"This value should have %s words at least.",maxwords:"This value should have %s words maximum.",rangewords:"This value should have between %s and %s words.",greaterthan:"This value should be greater than %s.",lessthan:"This value should be less than %s.",beforedate:"This date should be before %s.",afterdate:"This date should be after %s.",luhn:"This value should pass the luhn test.",americandate:"This value should be a valid date (MM/DD/YYYY).",awsaccountid:"This value should be a valid account ID"}})}(window.jQuery||window.Zepto);/*f63bf000b28e31b912ed4a1f521d1cf4*/$.fn.validator=function(options){"use strict";var form=this,settings=$.extend({errorHeader:"Oops! The following fields contain errors:"},options),errorFields=[],errorBox={addItem:function(id,text){var itemIndex=$.inArray(text,errorFields);var errorId="error-"+id+"-"+form.attr("id");var added=this.errorList.children("li#"+errorId).length>0;if(itemIndex>-1&&!added){this.errorList.children("li").each(function(){if($.inArray($(this).text(),errorFields)>itemIndex){$('<li id="'+errorId+'">'+text+"</li>").insertBefore($(this));added=true}})}if(!added){this.errorList.append('<li id="'+errorId+'">'+text+"</li>")}},errorList:"",header:settings.errorHeader,init:function(){if(form.find($(".error-summary")).length===0){form.prepend(this.wrapper);this.wrapper.find("h3").text(this.header);this.errorList=this.wrapper.find(".error-summary-list");this.show()}},remove:function(){this.wrapper.fadeOut(400).delay(400).remove()},show:function(){this.wrapper.fadeIn(400)},wrapper:$('<div class="error-summary alert alert-block alert-error"><h3></h3><ul class="error-summary-list"></ul></div>')},doSpamTrap=function(){var obfuscated_campId,key,x;var campIdKey=[];var realCampaignId="";var $obfuscatedCampIdSelector=form.find("[data-key-1]");var $keySelector=form.find("[data-key-2]");// Before we submit the form, we need to unscramble the form's campaign ID (the obfuscated value found in the JSP).  The goal here is
//  real campaign ID back into the form and then submit.
obfuscated_campId=$obfuscatedCampIdSelector.val();key=$keySelector.val();campIdKey.push(obfuscated_campId.slice(0,3));campIdKey.push(obfuscated_campId.slice(3,6));campIdKey.push(obfuscated_campId.slice(6,9));campIdKey.push(obfuscated_campId.slice(9,12));campIdKey.push(obfuscated_campId.slice(12,15));for(x=0;x<5;x++){if(key[x]==="0"){realCampaignId=campIdKey[x];break}}for(x=0;x<5;x++){if(key[x]==="1"){realCampaignId=realCampaignId+campIdKey[x];break}}for(x=0;x<5;x++){if(key[x]==="2"){realCampaignId=realCampaignId+campIdKey[x];break}}for(x=0;x<5;x++){if(key[x]==="3"){realCampaignId=realCampaignId+campIdKey[x];break}}for(x=0;x<5;x++){if(key[x]==="4"){realCampaignId=realCampaignId+campIdKey[x];break}}// Congratulations, you now have re-assembled the actual Campaign ID to be used when submitting the form.  We'll take this value
$obfuscatedCampIdSelector.val(realCampaignId);// Add a function to the submitCallbacks to remove the input containing the Campaign ID altogether.
submitCallbacks.push(function(){$obfuscatedCampIdSelector.remove()})},initFormTracking=function(){var cookieName="aws_campaign_trk",cookie=$.cookie(cookieName)||"{}",cookieObj=$.parseJSON(cookie),cookieDuration=30,campaignName=form.data("trk-campaign");if(cookieObj[campaignName]){form.append('<input type="hidden" id="Website_Referral_Code__c" name="Website_Referral_Code__c" value="'+cookieObj[campaignName]+'">');form.append('<input type="hidden" id="00N500000026nJd" name="00N500000026nJd" value="'+cookieObj[campaignName]+'">')}// add a callback to the submit queue that writes a cookie without the tracking info from the current form
submitCallbacks.push(function(){delete cookieObj[campaignName];$.cookie(cookieName,JSON.stringify(cookieObj),{path:"/",expires:cookieDuration})})},populateCustomerData=function(){var customerDataFieldNames={awsAccountId:"aws_account_id",isIAMUser:"is_iam_user",siteCatalystFallbackId:"sc_visitor_id",targetVisitorId:"target_visitor_id",urchinId:"urchin_id"};for(var key in customerDataFieldNames){$('input[name="'+customerDataFieldNames[key]+'"]').attr("value",AWS.CurrentUser[key])}},// an array of callbacks to be executed after the form is submitted
submitCallbacks=[];form.parsley({errors:{classHandler:function($elem){var ret;var parsleyAttr=$elem.data("parsley-class-handler");if(typeof parsleyAttr!=="undefined"){ret=$(parsleyAttr)}else{ret=$elem.parents(".field-err-wrapper").first()}return ret},container:function($elem){var ret;var parsleyAttr=$elem.data("parsley-errors-container");if(typeof parsleyAttr!=="undefined"){ret=$(parsleyAttr)}else{ret=undefined}return ret}},listeners:{onFieldError:function(elem){var tagName=elem.prop("tagName").toLowerCase(),fieldId=elem.attr("id"),$fieldErrorWrapper=elem.parents(".field-err-wrapper").first(),$errorList=$fieldErrorWrapper.find(".parsley-error-list"),$lastInput=$fieldErrorWrapper.find('input[type="text"]').last(),elemType=elem.attr("type"),errorLabel;if(fieldId){if(form.find($(".error-summary")).length===0){if(form.data("hide-error-summary")!==true){errorBox.init()}}errorLabel=form.find($('label[for="'+fieldId+'"]')).text();errorLabel=errorLabel.replace("*","");if(errorLabel.length>0){if(form.data("hide-error-summary")!==true){errorBox.addItem(fieldId,errorLabel)}}if(elem.hasClass("autocomplete")&&tagName==="select"){setTimeout(function(){$fieldErrorWrapper.find(".parsley-error-list").insertAfter($lastInput)},50)}if(elemType==="checkbox"||elemType==="radio"){if($errorList.length>0){$errorList.appendTo($fieldErrorWrapper)}}}},onFieldSuccess:function(elem){var fieldId=elem.attr("id"),elemVal=elem.val(),whitelist;$("#error-"+fieldId+"-"+form.attr("id")).remove();if(form.find($(".error-summary-list")).children("li").length===0){if(form.data("hide-error-summary")!==true){errorBox.remove()}}if(elem.data("inlist")){whitelist=elem.data("whitelist");$.each(whitelist,function(key,value){if(elemVal===value){form.find($('input[name="Campaign_ID"]')).val(key)}})}},onFieldValidate:function(elem){if(elem.hasClass("state-select")&&!form.data("submittedOnce")){return true}},onFormSubmit:function(isFormValid){if(!isFormValid){if(form.data("hide-error-summary")!==true){errorBox.init()}}else{form.unbind("submit");var sf=form.find($("[data-key-1]")),wl=form.find($("input[data-whitelist]"));if(sf.length>0&&wl.length===0){doSpamTrap()}if(form.data("ajax-submit")===true){form.off("submit");var ajaxForm=new AWS.AjaxForm(form);ajaxForm.submit()}else{form.submit()}// execute the callbacks in the submitCallbacks
for(var i=0;i<submitCallbacks.length;i++){submitCallbacks[i]()}}}}});function populateErrorFields(){form.find(".parsley-validated").each(function(i){var fieldId=$(this).attr("id");if(fieldId){var errorLabel=form.find($('label[for="'+fieldId+'"]')).text();errorLabel=errorLabel.replace("*","");errorFields[i]=errorLabel}})}function bindFormSubmitButtonHandler(){form.find('button[type="submit"]').click(function(e){e.preventDefault();form.data("submittedOnce",true);form.parsley("validate")})}$(document).ready(function(){populateErrorFields();bindFormSubmitButtonHandler();if(form.data("trk-campaign")){initFormTracking()}populateCustomerData()})};